/*!
 * Minimal jQuery-style helper used only for this static project.
 * Supports: $(selector), .each, .on, .addClass, .removeClass, .toggleClass, .attr.
 * This is NOT full jQuery, but is sufficient for the interactions in main.js.
 */
(function (global) {
  function MiniQuery(elements) {
    this.elements = elements || [];
  }

  MiniQuery.prototype.each = function (callback) {
    this.elements.forEach(function (el, idx) {
      callback.call(el, idx, el);
    });
    return this;
  };

  MiniQuery.prototype.on = function (event, handler) {
    return this.each(function () {
      this.addEventListener(event, handler);
    });
  };

  MiniQuery.prototype.addClass = function (cls) {
    return this.each(function () {
      this.classList.add(cls);
    });
  };

  MiniQuery.prototype.removeClass = function (cls) {
    return this.each(function () {
      this.classList.remove(cls);
    });
  };

  MiniQuery.prototype.toggleClass = function (cls) {
    return this.each(function () {
      this.classList.toggle(cls);
    });
  };

  MiniQuery.prototype.attr = function (name, value) {
    if (value === undefined) {
      return this.elements[0] ? this.elements[0].getAttribute(name) : undefined;
    }
    return this.each(function () {
      this.setAttribute(name, value);
    });
  };

  function $(selector, context) {
    if (selector instanceof MiniQuery) {
      return selector;
    }
    if (selector instanceof HTMLElement || selector === window || selector === document) {
      return new MiniQuery([selector]);
    }
    context = context || document;
    var nodeList = Array.prototype.slice.call(context.querySelectorAll(selector));
    return new MiniQuery(nodeList);
  }

  global.$ = $;
})(window);

